<!-- views/layouts/layout.ejs -->
<!doctype html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/account.css">
  </head>
  <body>
    <header class="site-header">
      <div class="header-content container">
        <a class="logo" href="/">CSE Motors</a>

        <!-- Main nav rendered once from utilities.getNav() -->
        <nav aria-label="Main navigation">
          <%- nav %>
        </nav>

        <div class="account-nav">
          <% if (locals.loggedin) { %>
            <a href="/account/" title="Account Management">
              Welcome <%= locals.accountData.account_firstname %>
            </a>
            <a href="/account/logout" title="Logout">Logout</a>
          <% } else { %>
            <a href="/account/login" title="My Account">My Account</a>
          <% } %>
        </div>
      </div>
    </header>

    <main role="main" class="container">
      <% if (typeof messages === 'function') { %>
        <div class="flash-messages"><%- messages() %></div>
      <% } %>
      <%- body %>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>© <%= new Date().getFullYear() %> CSE Motors. All rights reserved.</p>
        <nav>
          <a href="/privacy">Privacy</a> · <a href="/terms">Terms</a>
        </nav>
      </div>
    </footer>

    <script src="/js/script.js"></script>
  </body>
</html>
